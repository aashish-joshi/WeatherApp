var myStorage=window.localStorage,d=new Date,fullYear=d.getFullYear(),date=d.getDate(),month=d.getMonth()+1,day=d.getDay(),currDate=document.getElementById("currDate"),currDay=document.getElementById("currDay"),apiKeyElem=document.getElementById("apiKey"),apiKeyModal=document.getElementById("btn-saveApiKey"),pageUrl=window.location.href.toString().split(window.location.host)[1],weekdays=new Array(7);weekdays[0]="Sunday",weekdays[1]="Monday",weekdays[2]="Tuesday",weekdays[3]="Wednesday",weekdays[4]="Thursday",weekdays[5]="Friday",weekdays[6]="Saturday",Object.freeze(weekdays);var monthName=new Array(12);monthName[1]="Januray",monthName[2]="February",monthName[3]="March",monthName[4]="April",monthName[5]="May",monthName[6]="June",monthName[7]="July",monthName[8]="August",monthName[9]="September",monthName[10]="October",monthName[11]="November",monthName[12]="December",Object.freeze(monthName);var iconImg=document.getElementById("weather-icon"),loc=document.querySelector("#location"),tempC=document.querySelector(".c"),tempF=document.querySelector(".f"),desc=document.querySelector(".desc"),sunriseDOM=document.querySelector(".sunrise"),sunsetDOM=document.querySelector(".sunset"),modal=document.getElementById("myModal"),modalClose=document.getElementsByClassName("close");if("/"===pageUrl){function getUserLocation(e){window.addEventListener("load",(function(){var t=0,n=0;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(o){t=o.coords.longitude,n=o.coords.latitude;var a="https://api.openweathermap.org/data/2.5/weather?lat=".concat(n,"&lon=").concat(t,"&appid=").concat(e,"&units=metric");getWeatherData(n,t,a)}))}))}apiKeyModal.addEventListener("click",saveApiKey),currDate.innerHTML=date<10?"".concat(monthName[month],", 0").concat(date):"".concat(monthName[month],", ").concat(date),currDay.innerHTML="".concat(weekdays[day]),myStorage.getItem("api")?getUserLocation(myStorage.getItem("api")):modal.style.display="block"}function saveApiKey(){var e=apiKeyElem.value;e?(myStorage.setItem("api",e),console.log("key saved"),console.log("reloading page"),window.location.reload()):(alert("Please enter the API key."),console.log("key not entered"))}function closeModal(){window.onclick=function(e){e.target==modal&&(modal.style.display="none")}}function getWeatherData(e,t,n){fetch(n).then((function(e){if(e.ok)return e.json();throw console.log(e.body),new Error("Something went wrong.")})).then((function(e){var t=e.main.temp,n=e.name,o=e.weather[0],a=o.description,r=o.icon,c=e.sys,m=c.sunrise,i=c.sunset,d=Math.round(t),s=Math.round(9*t/5+32),l=new Date(1e3*m),u=new Date(1e3*i),y="https://openweathermap.org/img/wn/".concat(r,"@2x.png");iconImg.src=y,loc.textContent="".concat(n),tempC.textContent="".concat(d," °C"),tempF.textContent="".concat(s," °F"),desc.textContent="".concat(a),sunriseDOM.textContent="".concat(l.toLocaleTimeString()),sunsetDOM.textContent="".concat(u.toLocaleTimeString())})).catch((function(e){console.log(e)}))}function respNavBar(){var e=document.getElementById("navbar"),t=document.getElementById("navbar-button");-1==e.className.indexOf("w3-show")?(e.className+=" w3-show",t.innerHTML="&times;"):(e.className=e.className.replace(" w3-show",""),t.innerHTML="&#9776;")}function testClicker(){alert("You clicked on something")}"serviceWorker"in navigator&&navigator.serviceWorker.register("/service_worker.js").then((function(){console.log("Service Worker registered")})).catch((function(){console.log("Service Worker not registered")}));